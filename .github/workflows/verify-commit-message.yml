name: Get All Commits from Push

on:
  push:
    branches:
      - main
      - develop
      - feature/*   # Adjust if you have other branches to check

jobs:
  extract-commits:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Extract all commit messages from push
      run: |
        # Path to the GitHub event JSON file
        event_file=$GITHUB_EVENT_PATH

        # Use jq to extract all commit messages
        commit_messages=$(jq -r '.commits[].message' "$event_file")

        # Print all commit messages
        echo "Commit messages in this push:"
        echo "$commit_messages"

    - name: Extract all commits with details
      run: |
        # Path to the GitHub event JSON file
        event_file=$GITHUB_EVENT_PATH

        # Use jq to extract all commits with their details
        commits=$(jq -r '.commits[] | "\(.id) - \(.message) by \(.author.name)"' "$event_file")

        # Print all commits with details
        echo "Commits in this push:"
        echo "$commits"
